(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{526:function(s,n,t){"use strict";t.r(n);var a=t(6),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[t("img",{attrs:{src:"https://i.imgur.com/BERoqeN.jpg",alt:""}})]),s._v(" "),t("p",[s._v("LibreNMS is an autodiscovering PHP/MySQL/SNMP based network monitoring which includes support for a wide range of network hardware and operating systems.")]),s._v(" "),t("h2",{attrs:{id:"install-nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-nginx"}},[s._v("#")]),s._v(" Install Nginx")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("dnf -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" epel-release\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Install php composer")]),s._v("\ndnf -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nginx "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Install other required packages")]),s._v("\ndnf -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" bash-completion cronie fping "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" ImageMagick mariadb-server "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mtr")]),s._v(" net-snmp net-snmp-utils nginx nmap python3 python3-PyMySQL python3-redis python3-memcached python3-pip rrdtool "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"install-php7-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-php7-4"}},[s._v("#")]),s._v(" Install php7.4")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("dnf -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" dnf-utils http://rpms.remirepo.net/enterprise/remi-release-8.rpm\n\ndnf module reset php\ndnf module "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" php:remi-7.4\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Install php")]),s._v("\ndnf -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" php php-fpm php-cli php-common php-curl php-gd php-json php-mbstring php-process php-snmp php-xml php-zip php-mysqlnd\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Install php composer")]),s._v("\nphp -r "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"copy('https://getcomposer.org/installer', 'composer-setup.php');\"")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" php composer-setup.php --install-dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/bin --filename"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("composer\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Check php version")]),s._v("\nphp -v\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h2",{attrs:{id:"install-librenms"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-librenms"}},[s._v("#")]),s._v(" Install LibreNMS")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R librenms:librenms /opt/librenms\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("771")]),s._v(" /opt/librenms\nsetfacl -d -m g::rwx /opt/librenms/rrd /opt/librenms/logs /opt/librenms/bootstrap/cache/ /opt/librenms/storage/\nsetfacl -R -m g::rwx /opt/librenms/rrd /opt/librenms/logs /opt/librenms/bootstrap/cache/ /opt/librenms/storage/\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" - librenms\n./scripts/composer_wrapper.php "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --no-dev\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## set timezone")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/php.ini\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" date.timezone "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Asia/Taipei\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## set the system timezone")]),s._v("\ntimedatectl set-timezone Asia/Taipei\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("h3",{attrs:{id:"configure-mariadb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configure-mariadb"}},[s._v("#")]),s._v(" Configure MariaDB")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/my.cnf.d/mariadb-server.cnf\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### Within the [mysqld] section add:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("innodb_file_per_table")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lower_case_table_names")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" mariadb\nsystemctl restart mariadb\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## create db user and password")]),s._v("\nmysql -u root\n\nCREATE DATABASE librenms CHARACTER SET utf8 COLLATE utf8_unicode_ci"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nCREATE "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'librenms'")]),s._v("@"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),s._v(" IDENTIFIED BY "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'password'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nGRANT ALL PRIVILEGES ON librenms.* TO "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'librenms'")]),s._v("@"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nFLUSH PRIVILEGES"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("h3",{attrs:{id:"configure-php-fpm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configure-php-fpm"}},[s._v("#")]),s._v(" Configure PHP-FPM")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /etc/php-fpm.d/www.conf /etc/php-fpm.d/librenms.conf\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/php-fpm.d/librenms.conf\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('### Change "www" to "librenms"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("librenms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('### Change user and group to "librenms"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" librenms\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" group "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" librenms\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### Change listen to a unique name")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" listen "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /run/php-fpm-librenms.sock\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"configure-web-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configure-web-server"}},[s._v("#")]),s._v(" Configure Web Server")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/nginx/conf.d/librenms.conf\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### Add the following config, edit server_name as required:")]),s._v("\nserver "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n listen      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n server_name librenms.example.com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n root        /opt/librenms/html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n index       index.php"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n charset utf-8"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v(" on"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n gzip_types text/css application/javascript text/javascript application/x-javascript image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n location / "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  try_files "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v("/ /index.php?"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$query_string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n location ~ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("^/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(".php"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("$"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  fastcgi_pass unix:/run/php-fpm-librenms.sock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  fastcgi_split_path_info ^"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(".+"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(".php"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/.+"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  include fastcgi.conf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n location ~ /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("?"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("well-known"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".* "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  deny all"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Enable services")]),s._v("\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" --now nginx\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" --now php-fpm\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("h3",{attrs:{id:"selinux"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#selinux"}},[s._v("#")]),s._v(" SELinux")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("dnf -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" policycoreutils-python-utils\n\nsemanage fcontext -a -t httpd_sys_content_t "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/opt/librenms/html(/.*)?'")]),s._v("\nsemanage fcontext -a -t httpd_sys_rw_content_t "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/opt/librenms/(logs|rrd|storage)(/.*)?'")]),s._v("\nrestorecon -RFvv /opt/librenms\nsetsebool -P "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("httpd_can_sendmail")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nsetsebool -P httpd_execmem "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nchcon -t httpd_sys_rw_content_t /opt/librenms/.env\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"allow-fping"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#allow-fping"}},[s._v("#")]),s._v(" Allow fping")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF"),t("span",{pre:!0,attrs:{class:"token bash punctuation"}},[s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("http_fping.tt")]),s._v("\nmodule http_fping 1.0;\n\nrequire {\ntype httpd_t;\nclass capability net_raw;\nclass rawip_socket { getopt create setopt write read };\n}\n\n#============= httpd_t ==============\nallow httpd_t self:capability net_raw;\nallow httpd_t self:rawip_socket { getopt create setopt write read };\nEOF")]),s._v("\n\ncheckmodule -M -m -o http_fping.mod http_fping.tt\nsemodule_package -o http_fping.pp -m http_fping.mod\nsemodule -i http_fping.pp\n\naudit2why "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" /var/log/audit/audit.log\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h3",{attrs:{id:"allow-access-through-firewall"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#allow-access-through-firewall"}},[s._v("#")]),s._v(" Allow access through firewall")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("firewall-cmd --zone public --add-service http --add-service https\nfirewall-cmd --permanent --zone public --add-service http --add-service https\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"enable-lnms-command-completion"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#enable-lnms-command-completion"}},[s._v("#")]),s._v(" Enable lnms command completion")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /opt/librenms/lnms /usr/local/bin/lnms\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /opt/librenms/misc/lnms-completion.bash /etc/bash_completion.d/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"configure-snmpd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configure-snmpd"}},[s._v("#")]),s._v(" Configure snmpd")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /opt/librenms/snmpd.conf.example /etc/snmp/snmpd.conf\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -o /usr/bin/distro https://raw.githubusercontent.com/librenms/librenms-agent/master/snmp/distro\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /usr/bin/distro\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" snmpd\nsystemctl restart snmpd\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"cron-job"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cron-job"}},[s._v("#")]),s._v(" Cron job")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /opt/librenms/librenms.nonroot.cron /etc/cron.d/librenms\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"copy-logrotate-config"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#copy-logrotate-config"}},[s._v("#")]),s._v(" Copy logrotate config")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /opt/librenms/misc/librenms.logrotate /etc/logrotate.d/librenms\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"web-installer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#web-installer"}},[s._v("#")]),s._v(" Web Installer")]),s._v(" "),t("p",[s._v("Go to http://yourip/install")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" librenms:librenms /opt/librenms/config.php\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"references"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[s._v("#")]),s._v(" References")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://tecadmin.net/install-php-centos8/",target:"_blank",rel:"noopener noreferrer"}},[s._v("How to Install PHP 7.4, 7.3 & 7.2 on CentOS 8"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://linuxize.com/post/how-to-install-and-use-composer-on-centos-8/",target:"_blank",rel:"noopener noreferrer"}},[s._v("How to Install and Use PHP Composer on CentOS 8"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://docs.librenms.org/Installation/Install-LibreNMS/",target:"_blank",rel:"noopener noreferrer"}},[s._v("How to install LibreNMS"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://docs.librenms.org/Extensions/Agent-Setup/",target:"_blank",rel:"noopener noreferrer"}},[s._v("LibreNMS Agent Steup"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://wiki.freedomstu.com/books/%E9%96%8B%E6%BA%90%E8%BB%9F%E9%AB%94%E5%AE%89%E8%A3%9D%E6%B5%81%E7%A8%8B/page/librenms-%E5%90%84%E6%9C%8D%E5%8B%99%E7%9A%84-agent-%E6%9C%8D%E5%8B%99",target:"_blank",rel:"noopener noreferrer"}},[s._v("LibreNMS各項服務的-agent-服務"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://www.ichiayi.com/wiki/tech/librenms/check_mk",target:"_blank",rel:"noopener noreferrer"}},[s._v("Check MK agent"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://sourcedaddy.com/networking/enabling-snmp-linux-hosts.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Enabling SNMP on Linux Hosts"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://www.techsupportpk.com/2019/12/how-to-install-and-configure-librenms-nginx-centos-rhel8.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Intsall and configure LibreNMS and nginx on centos8"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://linuxize.com/post/how-to-install-python-on-centos-8/",target:"_blank",rel:"noopener noreferrer"}},[s._v("How to install python on centos8"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);n.default=e.exports}}]);